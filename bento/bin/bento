#!/usr/bin/env node
'use strict';

let app = require('yargs');
let packageJSON = require('../package.json');
let bento = require('../index.js');
let chalk = require('chalk');

app.version(packageJSON.version);

function commandLog(name, writeDescription) {
    console.log(chalk.yellow('bento') + ' ' + chalk.green(packageJSON.version) + ' ' + name);
    if (writeDescription) {
        console.log(packageJSON.description);
    }
    console.log();
}

app.command(['build [project]', '*'], 'Compiles the web application client project.', function (yargs) {
    return yargs.option('w', {
        alias: 'watch',
        describe: 'Enables rebuild on source code changes.'
    }).option('d', {
        alias: 'dev',
        describe: 'Disables output files minification.'
    });
}, function (argv) {
    commandLog('build');
    bento.build(argv.project, !argv.dev, argv.watch);
});

app.command('new [template]', 'Scaffolds a new web application client project.', function (yargs) {
}, function (argv) {
    commandLog('new');
    bento.scaffold(argv.template);
});

let parse = app.strict().help().argv;
//console.log(parse);
